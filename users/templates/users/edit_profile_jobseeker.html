{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактирование профиля соискателя</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Подключение jQuery -->
    <link rel="stylesheet" type="text/css" href="{% static 'users/css/edit_profile_jobseeker.css' %}">



</head>
<body>




    <h1>Редактирование профиля соискателя</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Поле для выбора категории -->
        <label for="id_category">Категория</label>
        {{ form.category }}

        <!-- Поле для выбора профессии -->
        <label for="id_profession">Профессия</label>
        {{ form.profession }}

        <!-- Поле для опыта работы -->
        <label for="id_experience">Опыт работы</label>
        {{ form.experience }}

        <!-- Поле для статуса -->
        <label for="id_status">Статус</label>
        <div class="status-options">
            <label>
                <input type="radio" name="status" value="True" {% if form.status.value == 'True' %}checked{% endif %}> Ищу работу
            </label>
            <label>
                <input type="radio" name="status" value="False" {% if form.status.value == 'False' %}checked{% endif %}> Не ищу работу
            </label>
        </div>


        <button type="submit">Сохранить изменения</button>
    </form>

    <script>
        // Функция для загрузки профессий по категории
        $('#id_category').change(function() {
            var categoryId = $(this).val();

            // Отправка AJAX-запроса для получения профессий по категории
            $.ajax({
                url: "{% url 'load_professions' %}",
                data: {
                    'category_id': categoryId
                },
                success: function(data) {
                    var professionSelect = $('#id_profession');
                    professionSelect.empty();  // Очистка существующих опций

                    // Добавление новой опции по умолчанию
                    professionSelect.append('<option value="">Выберите профессию</option>');

                    // Заполнение выпадающего списка новыми данными
                    $.each(data, function(key, value) {
                        professionSelect.append('<option value="' + value.id + '">' + value.name + '</option>');
                    });
                }
            });
        });
    </script>
</body>
</html>
